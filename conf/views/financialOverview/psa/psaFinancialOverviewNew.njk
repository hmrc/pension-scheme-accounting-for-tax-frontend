{% extends "includes/layout.njk" %}

{% from "govuk/components/back-link/macro.njk"  import govukBackLink %}
{% from "macros/title.njk"                      import title %}
{% from "govuk/components/table/macro.njk"      import govukTable %}


{% block pageTitle %}
    {{ title(messages("psa.financial.overview.title.new")) }}
{% endblock %}

{% block mainContent %}

    <div class="govuk-grid-row">
         <div class="govuk-grid-column-two-thirds">

                    {{ hmrcPageHeading({
                        text: messages("psa.financial.overview.title.new"),
                        section: psaName
                    }) }}
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-full">
                             <h2 class="govuk-heading-l govuk-!-margin-top-4 govuk-!-margin-bottom-2">
                                {{ messages("psa.financial.overview.h2.overdue.penalties.and.charges.new") }}
                            </h2>
                            <p class="govuk-body">
                                {{ messages("psa.financial.overview.h2.overdue.penalties.and.charges.p1.new") }}
                            </p>
                        </div>
                    </div>

                    <div class="govuk-grid-row">
                           <div class="govuk-grid-column-one-half">
                                <h3 class="govuk-caption-l govuk-!-margin-top-4 govuk-!-margin-bottom-2">
                                   {{ messages("psa.financial.overview.h2.overdue.new") }}
                                </h3>
                                <p class="govuk-body govuk-!-font-size-36 govuk-!-font-weight-bold">{{ totalOverdueCharge }}</p>
                           </div>
                           <div class="govuk-grid-column-one-half">
                                 <h3 class="govuk-caption-l govuk-!-margin-top-4 govuk-!-margin-bottom-2">
                                    {{ messages("psa.financial.overview.h2.totalInterestAccruing.new") }}
                                 </h3>
                                 <p class="govuk-body govuk-!-font-size-36 govuk-!-font-weight-bold">{{ totalInterestAccruing }}</p>
                           </div>
                    </div>
               {% if totalOverdueCharge != "£0.00" %}
                <p class="govuk-body-m govuk-!-margin-bottom-6">
                    <a id="allOverdue" class=govuk-link href="{{allOverduePenaltiesAndInterestLink}}"> {{ messages("psa.financial.overview.allOverdue.link.new") }}</a>
                </p>
               {% endif %}

                <hr>

                <div class="govuk-grid-row">
                     <div class="govuk-grid-column-full">
                        <h2 class="govuk-heading-l govuk-!-margin-top-6 govuk-!-margin-bottom-2">
                            {{ messages("psa.financial.overview.due.penalties.and.charges.new") }}
                        </h2>
                        <p class="govuk-body">
                            {{ messages("psa.financial.overview.due.penalties.and.charges.p1.new") }}
                        </p>
                    </div>
                </div>
                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-full">
                            <h3 class="govuk-caption-l govuk-!-margin-top-4 govuk-!-margin-bottom-2">
                               {{ messages("psa.financial.overview.h2.totalDuePenalties.new") }}
                            </h3>
                           <p class="govuk-body govuk-!-font-size-36 govuk-!-font-weight-bold">{{ totalUpcomingCharge }}</p>

                    </div>
                </div>
                {% if totalUpcomingCharge != "£0.00" %}
                 <p class="govuk-body-m govuk-!-margin-bottom-6">
                        <a id="allDue" class=govuk-link href="{{duePaymentLink}}"> {{ messages("psa.financial.overview.allDue.link") }}</a>
                 </p>
                 {% endif %}
                <hr>

                <div class="govuk-grid-row">
                     <div class="govuk-grid-column-full">
                        <h2 class="govuk-!-display-inline-block govuk-heading-l govuk-!-margin-bottom-2">
                             {{ messages("psa.financial.overview.h2.creditHeading.new") }}
                         </h2>
                         <h3 class="govuk-caption-l govuk-!-margin-top-4 govuk-!-margin-bottom-2">
                              {{ messages("psa.financial.overview.h2.creditBalance.new") }}
                         </h3>
                        <p class="govuk-body govuk-!-font-size-36 govuk-!-font-weight-bold"> {{creditBalanceFormatted}} </p>
                        {% if creditBalance > 0 %}
                            <p class="govuk-body-m">
                                <a id="refund" class=govuk-link href="{{ requestRefundUrl }}"> {{ messages("schemeFinancial.refund") }} </a>
                            </p>
                        {% endif %}

                     </div>
                </div>
                <p class="govuk-body-m">
                   <a id="allPaymentCharges" class=govuk-link href="{{ allPaymentLink }}"> {{ messages("psa.financial.overview.pastPenalties.link") }}</a>
                </p>

         </div>
    </div>

{% endblock %}